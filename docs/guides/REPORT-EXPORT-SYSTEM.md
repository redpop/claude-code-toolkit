# Report Export System

## Overview

The Claude Code Toolkit now supports exporting analysis reports in multiple formats for documentation, team sharing, and historical tracking.

## Export Formats

### 1. Markdown Reports (.md)

- **Purpose**: Human-readable reports for documentation
- **Features**: Rich formatting, tables, code examples
- **Use Case**: Team reviews, documentation, GitHub/GitLab integration

### 2. JSON Data (.json)

- **Purpose**: Machine-readable data for tooling integration
- **Features**: Structured data, metrics, findings
- **Use Case**: CI/CD integration, custom tooling, data analysis

### 3. HTML Reports (.html)

- **Purpose**: Rich visual reports with charts
- **Features**: Interactive elements, graphs, detailed styling
- **Use Case**: Executive summaries, detailed offline viewing

## Command Syntax

All analysis commands support export parameters:

```bash
# Basic exports
/analyze-deep --export-md
/security-audit --export-json
/performance-scan --export-html

# Custom naming
/analyze-deep --export-md=security-review-2025-01-28.md
/test-coverage --export-json=coverage-data.json

# Multiple formats
/analyze-deep --export-md --export-json
/security-audit --export-all  # All formats

# With custom directory
/analyze-deep --export-md --export-dir=reports/
```

## File Naming Convention

Default naming pattern: `{command}-{timestamp}.{format}`

Examples:

- `analyze-deep-20250128-143022.md`
- `security-audit-20250128-143022.json`
- `performance-scan-20250128-143022.html`

## Export Directory Structure

```
reports/
├── 2025-01/
│   ├── analyze-deep-20250128-143022.md
│   ├── analyze-deep-20250128-143022.json
│   └── security-audit-20250127-091545.md
├── templates/
│   ├── markdown-template.md
│   ├── json-schema.json
│   └── html-template.html
└── .report-history.json
```

## Markdown Report Format

```markdown
# Code Analysis Report

**Generated**: 2025-01-28 14:30:22  
**Command**: /analyze-deep  
**Project**: ratenzahlung  
**Duration**: 2m 34s

## Executive Summary

- **Overall Health Score**: 62/100
- **Issues Found**: 47 total (8 critical, 15 high, 18 medium, 6 low)
- **Priority Actions**: 3 immediate, 8 short-term

## Critical Findings

[Detailed findings with priority, impact, and solutions]

## Metrics Dashboard

| Metric   | Current | Target | Change |
| -------- | ------- | ------ | ------ |
| Security | 85/100  | 95/100 | ↑ +5   |

## Action Plan

### Immediate (0-24h)

1. Fix database performance issues
2. Add error boundaries

### Short-term (1 week)

[Prioritized recommendations]

---

_Generated by Claude Code Toolkit v2.1.1_
```

## JSON Export Schema

```json
{
  "metadata": {
    "timestamp": "2025-01-28T14:30:22Z",
    "command": "analyze-deep",
    "project": "ratenzahlung",
    "duration_seconds": 154,
    "toolkit_version": "2.1.1"
  },
  "summary": {
    "health_score": 62,
    "total_issues": 47,
    "severity_breakdown": {
      "critical": 8,
      "high": 15,
      "medium": 18,
      "low": 6
    }
  },
  "findings": [
    {
      "id": "PERF-001",
      "category": "performance",
      "severity": "critical",
      "title": "Database operations in loops",
      "description": "Sequential database inserts causing 10-30s delays",
      "file": "src/database.ts",
      "line": 122,
      "impact": "User experience degradation",
      "solution": "Use bulkAdd() for 95% performance improvement",
      "estimated_effort": "2 hours"
    }
  ],
  "metrics": {
    "security_score": 85,
    "performance_score": 30,
    "test_coverage": 45.5,
    "code_quality": 60,
    "architecture_score": 40
  },
  "recommendations": [
    {
      "priority": "immediate",
      "action": "Fix database performance",
      "effort": "2 hours",
      "impact": "95% faster imports"
    }
  ]
}
```

## HTML Report Features

- **Interactive Charts**: Health metrics, trend graphs
- **Collapsible Sections**: Detailed findings, code examples
- **Search/Filter**: Find specific issues or categories
- **Export Options**: PDF generation, sharing links
- **Dark/Light Mode**: Theme preferences

## Historical Comparison

The system maintains a history file (`.report-history.json`) to track changes:

```json
{
  "project": "ratenzahlung",
  "reports": [
    {
      "timestamp": "2025-01-28T14:30:22Z",
      "health_score": 62,
      "issues": 47,
      "file": "analyze-deep-20250128-143022.md"
    },
    {
      "timestamp": "2025-01-27T10:15:33Z",
      "health_score": 58,
      "issues": 52,
      "file": "analyze-deep-20250127-101533.md"
    }
  ]
}
```

## Integration Examples

### CI/CD Pipeline

```yaml
- name: Code Analysis
  run: /analyze-deep --export-json=analysis.json
- name: Check Quality Gate
  run: jq '.summary.health_score >= 70' analysis.json
```

### Git Hooks

```bash
# Pre-push hook
/security-audit --export-md=security-report.md
git add security-report.md
```

### Team Workflows

```bash
# Weekly team review
/analyze-deep --export-html=team-review.html
open team-review.html  # Opens in browser
```

## Configuration

Users can customize export behavior in `.claude/export-config.json`:

```json
{
  "default_format": "markdown",
  "export_directory": "reports/",
  "naming_pattern": "{command}-{date}-{time}",
  "include_metadata": true,
  "auto_cleanup": {
    "enabled": true,
    "keep_days": 30
  },
  "html_template": "custom-template.html"
}
```

## Implementation Status

- [x] Architecture design
- [ ] Basic markdown export
- [ ] JSON export with schema
- [ ] HTML template system
- [ ] Historical tracking
- [ ] Command integration
- [ ] Documentation updates

## Benefits

1. **Documentation**: Automatic report generation for audits
2. **Team Collaboration**: Shareable analysis results
3. **Historical Tracking**: Monitor code quality over time
4. **CI/CD Integration**: Quality gates and automated checks
5. **Executive Reporting**: High-level summaries for management
6. **Offline Analysis**: Detailed reports for thorough review
