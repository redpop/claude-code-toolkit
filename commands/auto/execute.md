---
allowed-tools: Task, Read, Grep, Bash(jq:*), Bash(date:*), Write, TodoWrite
description: Execute an action plan systematically, running fix commands in priority order with progress tracking
argument-hint: <action-plan.md> [--mode=supervised|auto] [--dry-run] [--parallel=N] [--focus=category]
---

# Execute Action Plan Command

This command reads an action plan generated by `/analyze-report --generate-action-plan` and systematically executes the fix commands in priority order, tracking progress and handling failures gracefully.

## Execution Modes

### 1. Supervised Mode (Default)
```bash
/execute-action-plan action-plan-20250129.md
/execute-action-plan action-plan.md --mode=supervised
```
- Asks for confirmation before each command
- Shows preview of changes
- Allows skipping specific tasks
- Safer for production environments

### 2. Automatic Mode
```bash
/execute-action-plan action-plan.md --mode=auto
/execute-action-plan action-plan.md --mode=auto --parallel=3
```
- Executes all commands automatically
- Continues on non-critical failures
- Supports parallel execution
- Best for CI/CD pipelines

### 3. Dry Run Mode
```bash
/execute-action-plan action-plan.md --dry-run
```
- Shows what would be executed
- No actual changes made
- Validates all commands
- Estimates total time

## Workflow Phases

### Phase 1: Plan Validation

1. **Load Action Plan**:
   - Parse markdown file
   - Extract todo items with commands
   - Validate command syntax
   - Check dependencies

2. **Pre-flight Checks**:
   - Verify git status (clean working directory)
   - Check available tools
   - Validate file paths
   - Estimate total effort

### Phase 2: Execution Setup

1. **Create Execution State**:
   - Initialize progress tracker
   - Set up execution log
   - Create rollback points
   - Start timer

2. **Priority Ordering**:
   - Sort by criticality (üî¥ ‚Üí üü° ‚Üí üü¢)
   - Respect dependencies
   - Group related tasks
   - Plan parallelization

### Phase 3: Task Execution

For each task in priority order:

1. **Pre-execution**:
   - Show task details
   - Get confirmation (if supervised)
   - Create checkpoint
   - Log start time

2. **Execute Command**:
   ```markdown
   Executing: {task_name} ({effort_estimate})
   Command: {command}
   Status: IN_PROGRESS
   ```

3. **Handle Results**:
   - Success: Mark complete, log changes
   - Failure: Log error, decide continuation
   - Partial: Note incomplete work
   - Skip: Mark as skipped with reason

### Phase 4: Progress Tracking

Real-time updates using TodoWrite:
```markdown
## Execution Progress

### ‚úÖ Completed (5/12)
- Input Sanitization (2h 45m)
- JSON Validation (1h 30m)
- Remove Console Logs (45m)
- CSP Headers (1h 15m)
- Code Duplication Fix (1h 50m)

### üîÑ In Progress (1/12)
- Batch DB Operations (started 10m ago)

### ‚è≥ Pending (5/12)
- Test Generation
- Performance Optimization
- Error Boundaries
- Documentation Update
- Final Security Scan

### ‚ùå Failed (1/12)
- Legacy Migration (dependency conflict)
```

### Phase 5: Completion Summary

Generate execution summary:
```markdown
# Action Plan Execution Summary

**Started**: {start_time}
**Completed**: {end_time}
**Duration**: {total_duration}
**Success Rate**: {percentage}%

## Results
- Total Tasks: {total}
- Completed: {completed} ‚úÖ
- Skipped: {skipped} ‚è≠Ô∏è
- Failed: {failed} ‚ùå

## Key Achievements
{list_of_major_improvements}

## Next Steps
{recommendations_based_on_results}
```

## Advanced Features

### Parallel Execution
```bash
# Execute up to 3 independent tasks simultaneously
/execute-action-plan action-plan.md --parallel=3

# Auto-detect safe parallelization
/execute-action-plan action-plan.md --parallel=auto
```

### Category Focus
```bash
# Execute only security-related tasks
/execute-action-plan action-plan.md --focus=security

# Execute only quick wins
/execute-action-plan action-plan.md --focus=quick-wins

# Execute by effort threshold
/execute-action-plan action-plan.md --max-effort=4h
```

### Checkpoint Management
```bash
# Resume from last checkpoint
/execute-action-plan action-plan.md --resume

# Create named checkpoint
/execute-action-plan action-plan.md --checkpoint=pre-deploy

# Rollback to checkpoint
/execute-action-plan action-plan.md --rollback=pre-deploy
```

### Integration Options
```bash
# CI/CD mode with notifications
/execute-action-plan action-plan.md --mode=auto --notify=slack

# Generate JIRA tickets for failures
/execute-action-plan action-plan.md --ticket-on-failure

# Export execution log
/execute-action-plan action-plan.md --export-log=execution.log
```

## Error Handling

### Failure Categories

1. **Critical Failures** (Stop execution):
   - Git conflicts
   - Build breakage
   - Test failures
   - Security vulnerabilities introduced

2. **Non-Critical Failures** (Continue):
   - Linting warnings
   - Documentation gaps
   - Optional optimizations
   - Style violations

3. **Recoverable Errors** (Retry):
   - Network timeouts
   - Rate limits
   - Temporary file locks
   - Resource constraints

### Recovery Strategies

```markdown
On failure, the command will:
1. Log detailed error information
2. Create recovery checkpoint
3. Suggest manual intervention
4. Continue with next task (if non-critical)
5. Generate failure report
```

## Usage Examples

### Basic Execution
```bash
# Execute latest action plan
/execute-action-plan reports/action-plan-latest.md

# Supervised execution with confirmations
/execute-action-plan action-plan.md --mode=supervised
```

### Team Workflow
```bash
# Dry run for team review
/execute-action-plan action-plan.md --dry-run --export=review.md

# Execute assigned tasks only
/execute-action-plan action-plan.md --assignee="Senior Developer"
```

### Automated Pipeline
```bash
# Full auto mode for CI/CD
/execute-action-plan action-plan.md \
  --mode=auto \
  --parallel=4 \
  --fail-fast \
  --export-log=ci-execution.log
```

### Progressive Rollout
```bash
# Execute in stages
/execute-action-plan action-plan.md --focus=critical --checkpoint=critical-done
/execute-action-plan action-plan.md --focus=quick-wins --checkpoint=phase2-done
/execute-action-plan action-plan.md --focus=enhancements
```

## Best Practices

1. **Always dry-run first** in production environments
2. **Create git commits** after each major phase
3. **Monitor system resources** during parallel execution
4. **Keep logs** for audit trail
5. **Test in staging** before production execution

## Output Files

The command generates:
- `execution-log-{timestamp}.md` - Detailed execution log
- `execution-state-{timestamp}.json` - State for resume capability
- Updated action plan with completion status
- Completion report (via `/workflow:completion-report`)

This command transforms action plans into reality, providing a bridge between analysis and implementation with full visibility and control.